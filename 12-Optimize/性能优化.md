<h1>12.1 CPU vs GPU</h1>

##动画的舞台

CoreAnimation处在iOS的核心地位：应用内和应用间都能用到它。  

- 动画和屏幕上的组合的图层实际上被一个单独的进程管理，而不是你的应用程序。（这里插一句，在使用SDWebImage框架加载大量网络图片显示时，会出现程序内存警告而崩溃的情况，但是这时查看应用内存占用，会发现应用内占用内存并不高，而是整个手机的内存出现不足的情况，也就是其他内存不够用，应该是类似或者就是这种情况。）这个进程就是所谓的渲染服务。在iOS5和之前的版本是SpringBoard。在iOS6之后的版本中叫做BackBoard。
- 当运行一段动画的时候，整个过程会被四个分离的阶段打破：
  1. **布局**-这是准备你的视图、图层的层级关系，以及设置图层属性（位置，背景色，边框等等）的阶段。
  2. **显示**-这是图层的急速图片被绘制的阶段。绘制有可能涉及你的-drawRect：和-drawLayer：inContext：方法的调用路径。
  3. **准备**-这是Core Animation准备发送动画数据到渲染服务的阶段。这同时也是Core Animation将要执行一些别的事务例如解码动画过程中将要显示的图片的时间点。
  4. **提交**-这是最后的阶段，Core Animation打包所有的图层和动画属性，然后通过IPC（内部处理通信）发送到渲染服务进行显示。
- 以上这些阶段仅仅发生在你的应用程序之内，在动画在屏幕上显示之前仍然有更多的工作。一旦打包的图层和动画到达渲染服务进程，他们会被反序列化成为另一个叫做渲染树的图层树。使用这个梳妆结构，渲染服务对动画的每一帧做出如下工作：
  1. 对所哟丶图层属性计算中间值，设置OpenGL几何形状来执行渲染。
  2. 在屏幕上渲染可见的三角形。

所以一共有六个阶段；最后两个阶段在动画过程中不停的重复。前五个阶段都在软件层面处理（通过CPU），只有最后一个在GPU执行。而且你真正只能控制前两个列段：布局和显示。Core Animation框架在内部会处理剩下的事务。

##CPU相关操作
